<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_production_lot_asset_form_inherit" model="ir.ui.view">
        <field name="name">stock.production.lot.asset.form.inherit</field>
        <field name="model">stock.lot</field>
        <field name="inherit_id" ref="sttl_assets.view_production_lot_asset_form"/>
        <field name="arch" type="xml">
            <xpath expr="//div[@name='button_box']" position="inside">
                <button name="action_lot_open_equipment" icon="fa-bars" class="oe_stat_button" type="object">
                    <div class="o_stat_info">
                        <span class="o_stat_text">Equipment</span>
                    </div>
                </button>
            </xpath>

            <xpath expr="//button[@name='action_lot_open_repairs']" position="after">
                <button name="action_lot_open_maintenance_requests" icon="fa-wrench" class="oe_stat_button" type="object">
                    <div class="o_field_widget o_stat_info">
                        <div class="o_field_widget o_stat_info align-items-baseline flex-row gap-1 me-1">
                            <span class="o_stat_text">Maintenance</span>
                            <span class="o_stat_value">
                                <field name="maintenance_request_count" widget="statinfo" nolabel="1" class="mr4"/>
                            </span>
                        </div>
                    </div>
                </button>
            </xpath>

            <xpath expr="//field[@name='installation_date']" position="after">
                <field name="asset_status_id" options="{'no_create': True, 'no_create_edit': True}"/>
            </xpath>
        </field>
    </record>

    <record id="view_production_lot_asset_tree_inherit" model="ir.ui.view">
        <field name="name">stock.production.lot.asset.list.inherit</field>
        <field name="model">stock.lot</field>
        <field name="inherit_id" ref="sttl_assets.view_production_lot_asset_tree" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='create_date']" position="after">
                <field name="asset_status_id" />
            </xpath>
        </field>
    </record>

    <record id="action_assets_status" model="ir.actions.act_window">
        <field name="name">Asset Status</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">asset.status</field>
        <field name="view_mode">list,form</field>
        <field name="domain">[]</field>
    </record>

    <menuitem name="Asset Status" id="menu_asset_status" parent="sttl_assets.assets_configuration_menu" action="action_assets_status" />
</odoo>
